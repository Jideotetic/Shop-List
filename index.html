<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shopping List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/index.css" />
  </head>
  <body class="bg-gray-400">
    <h1 class="text-center text-3xl font-bold py-10">My ShopCart List</h1>

    <form class="flex item-center justify-center flex-col mx-auto max-w-sm">
      <label class="text-lg" for="item">Enter a new item</label>
      <input
        type="text"
        name="item"
        id="item"
        class="block w-full mt-2 bg-white placeholder:text-gray-200 text-sm px-4 py-3.5 rounded-xl shadow-sm border border-transparent focus:border-black focus:outline-none"
      />
      <button class="bg-blue-500 text-white py-3 rounded-xl mt-4">
        Add Item
      </button>
    </form>

    <ul class="mx-auto max-w-sm pt-6"></ul>

    <dialog class="p-10">
      <p class="text-center text-3xl font-bold pb-4">Delete Item</p>
      <p class="pb-4">Are you sure you want to delete item!</p>
      <form class="flex w-full">
        <button
          class="bg-gray-400 hover:bg-gray-200 p-1 w-[50%] rounded-xl"
          formmethod="dialog"
        >
          Cancel
        </button>
        <button
          id="confirm"
          class="bg-red-400 hover:bg-red-500 p-1 w-[50%] rounded-xl"
        >
          Confirm
        </button>
      </form>
    </dialog>

    <script>
      const itemList = document.querySelector("ul");
      const input = document.querySelector("input");
      const AddItemButton = document.querySelector("button");
      const dialog = document.querySelector("dialog");
      const confirmButton = document.querySelector("#confirm");
      let itemToDelete;

      AddItemButton.addEventListener("click", (e) => {
        e.preventDefault();
        const myItem = input.value;
        if (myItem === "") {
          input.focus();
          return;
        }
        input.value = "";

        const listItem = document.createElement("li");
        const listText = document.createElement("span");
        const listBtn = document.createElement("button");

        listItem.appendChild(listText);
        listText.textContent = myItem;
        listItem.appendChild(listBtn);
        listBtn.textContent = "Delete";
        itemList.appendChild(listItem);

        listBtn.addEventListener("click", () => {
          itemToDelete = listItem;
          dialog.showModal();
        });

        input.focus();
      });

      confirmButton.addEventListener("click", (e) => {
        e.preventDefault();
        itemList.removeChild(itemToDelete);
        dialog.close();
      });
    </script>
  </body>
</html>
